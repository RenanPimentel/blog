{"version":3,"sources":["util/api.ts","context/reducer.ts","context/context.tsx","components/NavUser.tsx","components/ToggleDark.tsx","components/Navbar.tsx","pages/ErrorPage.tsx","pages/HomePage.tsx","pages/LoginPage.tsx","pages/MePage.tsx","pages/MePostsCreatePage.tsx","pages/MePostsPage.tsx","pages/MePostsUpdatePage.tsx","pages/RegisterPage.tsx","components/ChangeAvatar.tsx","components/ChangeBanner.tsx","components/ChangeName.tsx","pages/SettingsPage.tsx","pages/UserPage.tsx","App.tsx","index.tsx"],"names":["api","axios","create","baseURL","withCredentials","reducer","state","action","type","me","payload","Error","MainContext","createContext","defaultState","MyContextProvider","children","useReducer","dispatch","logout","a","get","location","assign","value","defaultAvatar","defaultBanner","setMe","Provider","NavUser","useContext","className","src","avatar","alt","to","onClick","ToggleDark","useState","localStorage","getItem","dark","setDark","useEffect","setItem","String","document","getElementById","classList","e","preventDefault","toggleDark","Navbar","then","response","data","user","id","ErrorPage","history","useHistory","goBack","HomePage","LoginPage","formEl","useRef","login","setLogin","password","setPassword","push","handleSubmit","post","reload","errors","forEach","err","input","current","querySelector","field","div","createElement","add","textContent","reason","parentElement","appendChild","setTimeout","removeChild","remove","onSubmit","ref","htmlFor","onChange","target","placeholder","MePage","username","MePostsCreate","MePostsPage","MePostsUpdatePage","RegisterPage","setUsername","email","setEmail","useCookies","setCookie","ChangeAvatar","context","setAvatar","preview","setPreview","error","setError","setProfilePicture","fetch","blob","size","startsWith","title","disabled","ChangeBanner","banner","setBanner","setProfileBanner","console","log","ChangeName","changingName","setChangingName","map","join","SettingsPage","UserPage","user_id","useParams","App","exact","path","MePostsCreatePage","ReactDOM","render","CookiesProvider"],"mappings":"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","file":"static/js/main.8f35d3b2.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const api = axios.create({\n  baseURL: \"http://localhost:4000/api/v1\",\n  withCredentials: true,\n});\n","interface Action {\n  type: string;\n  payload: any;\n}\n\nexport function reducer(state: IState, action: Action): IState {\n  if (action.type === \"SET_ME\") {\n    return { ...state, me: action.payload };\n  }\n\n  throw new Error(\"reducer couldn't find it\");\n}\n","/* eslint-disable no-restricted-globals */\nimport React, { createContext, useReducer, ReactElement } from \"react\";\nimport { api } from \"../util/api\";\nimport { reducer } from \"./reducer\";\n\nconst MainContext = createContext({} as MainContext);\n\nconst defaultState = {\n  me: {},\n} as IState;\n\ninterface Props {\n  children: ReactElement;\n}\n\nfunction MyContextProvider({ children }: Props) {\n  const [state, dispatch] = useReducer(reducer, defaultState);\n\n  const logout = async () => {\n    await api.get(\"/logout\");\n    location.assign(\"/me\");\n  };\n\n  const setMe = (me: IMe) => {\n    dispatch({ type: \"SET_ME\", payload: me });\n  };\n\n  const defaultAvatar: string =\n    \"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ficon-library.com%2Fimages%2Fdefault-profile-icon%2Fdefault-profile-icon-16.jpg&f=1&nofb=1\";\n\n  const defaultBanner: string =\n    \"https://images.unsplash.com/photo-1622988869811-a4f3d3fe5441?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80\";\n\n  const value: MainContext = {\n    defaultAvatar,\n    defaultBanner,\n    logout,\n    setMe,\n    ...state,\n  };\n  return <MainContext.Provider value={value}>{children}</MainContext.Provider>;\n}\n\nexport { MyContextProvider, MainContext };\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { MainContext } from \"../context/context\";\n\nfunction NavUser() {\n  const { logout, me, defaultAvatar } = useContext(MainContext);\n\n  return (\n    <div className=\"nav-user\">\n      <div className=\"profile-container\">\n        <div className=\"profile-picture\">\n          <img src={me.avatar || defaultAvatar} alt=\"your profile\" />\n        </div>\n        <div className=\"container-wrapper\">\n          <div className=\"profile-settings\">\n            <li>\n              <Link to=\"/me\" className=\"link\">\n                Me\n              </Link>\n              <div className=\"line\"></div>\n            </li>\n            <li>\n              <Link to=\"/me/posts\" className=\"link\">\n                My posts\n              </Link>\n              <div className=\"line\"></div>\n            </li>\n            <li>\n              <Link to=\"/settings\" className=\"link\">\n                Settings\n              </Link>\n              <div className=\"line\"></div>\n            </li>\n            <li>\n              <span onClick={logout} className=\"link\">\n                Logout\n              </span>\n              <div className=\"line\"></div>\n            </li>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default NavUser;\n","import React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { BsSun, BsMoon } from \"react-icons/bs\";\n\nfunction ToggleDark() {\n  const [dark, setDark] = useState(localStorage.getItem(\"dark\") === \"true\");\n\n  useEffect(() => {\n    localStorage.setItem(\"dark\", String(dark));\n    document.getElementById(\"root\")?.classList[dark ? \"add\" : \"remove\"](\"dark\");\n  }, [dark]);\n\n  const toggleDark = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    e.preventDefault();\n    setDark(!dark);\n  };\n\n  return (\n    <div className=\"toggle-dark\" onClick={e => toggleDark(e)}>\n      <button>{dark ? <BsSun /> : <BsMoon />}</button>\n    </div>\n  );\n}\n\nexport default ToggleDark;\n","/* eslint-disable no-restricted-globals */\nimport React, { useEffect } from \"react\";\nimport { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { MainContext } from \"../context/context\";\nimport { api } from \"../util/api\";\nimport NavUser from \"./NavUser\";\nimport ToggleDark from \"./ToggleDark\";\n\nfunction Navbar() {\n  const { setMe, me } = useContext(MainContext) as MainContext;\n\n  useEffect(() => {\n    api.get(\"/me\").then(response => {\n      setMe(response.data.user);\n    });\n  }, []);\n\n  return (\n    <nav className=\"nav\">\n      <ul className=\"links\">\n        <li>\n          <Link className=\"link\" to=\"/\">\n            Home\n          </Link>\n        </li>\n        {me?.id ? (\n          <NavUser />\n        ) : (\n          <>\n            <li>\n              <Link className=\"link\" to=\"/register\">\n                Register\n              </Link>\n            </li>\n            <li>\n              <Link className=\"link\" to=\"/login\">\n                Login\n              </Link>\n            </li>\n          </>\n        )}\n      </ul>\n      <ToggleDark />\n    </nav>\n  );\n}\n\nexport default Navbar;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction ErrorPage() {\n  const history = useHistory();\n  const sendBack = () => {\n    history.goBack();\n  };\n\n  return (\n    <div className=\"wrapper\">\n      <h1>Page not found</h1>\n      <button className=\"btn\" onClick={sendBack}>\n        Go Back\n      </button>\n    </div>\n  );\n}\n\nexport default ErrorPage;\n","import React from \"react\";\n\nfunction HomePage() {\n  return <div>home page</div>;\n}\n\nexport default HomePage;\n","/* eslint-disable no-restricted-globals */\nimport React, { MutableRefObject, useRef, useState } from \"react\";\nimport { useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { MainContext } from \"../context/context\";\nimport { api } from \"../util/api\";\n\ntype DataError = { field: string; reason: string };\n\nfunction LoginPage() {\n  const formEl: MutableRefObject<null | HTMLFormElement> = useRef(null);\n  const { me } = useContext(MainContext) as MainContext;\n  const history = useHistory();\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  useEffect(() => {\n    if (me) {\n      history.push(\"/me\");\n    }\n  }, [history, me]);\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    try {\n      await api.post(\"/login\", { login, password });\n      history.push(\"/me\");\n      location.reload();\n    } catch (e) {\n      const errors: DataError[] = e.response.data.errors;\n\n      errors.forEach(err => {\n        const input = formEl.current?.querySelector(\n          `#${err.field}`\n        ) as HTMLInputElement;\n\n        const div = document.createElement(\"div\");\n        div.classList.add(\"error\");\n        div.textContent = err.reason;\n        input.parentElement?.appendChild(div);\n        input.classList.add(\"border-red\");\n\n        setTimeout(() => {\n          input.parentElement?.removeChild(div);\n          input.classList.remove(\"border-red\");\n        }, 2500);\n      });\n    }\n  };\n\n  return (\n    <main className=\"wrapper\">\n      <div className=\"form-container\">\n        <form onSubmit={handleSubmit} ref={formEl}>\n          <div className=\"form-control\">\n            <label htmlFor=\"login\">Login</label>\n            <input\n              onChange={e => setLogin(e.target.value)}\n              value={login}\n              className=\"input\"\n              type=\"text\"\n              id=\"login\"\n              placeholder=\"AwesomeName\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              onChange={e => setPassword(e.target.value)}\n              value={password}\n              className=\"input\"\n              type=\"password\"\n              id=\"password\"\n              placeholder=\"my safe password\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <button type=\"submit\" className=\"btn btn-large\">\n              Submit\n            </button>\n          </div>\n        </form>\n      </div>\n    </main>\n  );\n}\n\nexport default LoginPage;\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { MainContext } from \"../context/context\";\n\nfunction MePage() {\n  const { me } = useContext(MainContext) as MainContext;\n\n  if (!me) {\n    return (\n      <main className=\"wrapper\">\n        <h1>You are not logged in!</h1>\n        <Link className=\"btn btn-large no-bg\" to=\"/login\">\n          Do you have an account? Login\n        </Link>\n        <Link className=\"btn btn-large no-bg\" to=\"/register\">\n          Create your own account! Register\n        </Link>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"wrapper\">\n      <h1>Welcome {me.username}!</h1>\n    </main>\n  );\n}\n\nexport default MePage;\n","import React from \"react\";\n\nfunction MePostsCreate() {\n  return <div>me posts create</div>;\n}\n\nexport default MePostsCreate;\n","import React from \"react\";\n\nfunction MePostsPage() {\n  return <div>Me Posts</div>;\n}\n\nexport default MePostsPage;\n","import React from \"react\";\n\nfunction MePostsUpdatePage() {\n  return <div>me posts update</div>;\n}\n\nexport default MePostsUpdatePage;\n","/* eslint-disable no-restricted-globals */\nimport React, { MutableRefObject, useRef, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { useHistory } from \"react-router-dom\";\nimport { api } from \"../util/api\";\n\ntype DataError = { field: string; reason: string };\n\nfunction RegisterPage() {\n  const formEl: MutableRefObject<null | HTMLFormElement> = useRef(null);\n  const history = useHistory();\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [, setCookie] = useCookies([\"me\"]);\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    try {\n      const post = await api.post(\"/register\", { username, email, password });\n      history.push(\"/me\");\n      location.reload();\n      setCookie(\"me\", post.data.user);\n    } catch (e) {\n      const errors: DataError[] = e.response.data.errors;\n\n      errors.forEach(err => {\n        const input = formEl.current?.querySelector(\n          `#${err.field}`\n        ) as HTMLInputElement;\n\n        const div = document.createElement(\"div\");\n        div.classList.add(\"error\");\n        div.textContent = err.reason;\n        input.parentElement?.appendChild(div);\n        input.classList.add(\"border-red\");\n\n        setTimeout(() => {\n          input.parentElement?.removeChild(div);\n          input.classList.remove(\"border-red\");\n        }, 2500);\n      });\n    }\n  };\n\n  return (\n    <main className=\"wrapper\">\n      <div className=\"form-container\">\n        <form onSubmit={handleSubmit} ref={formEl}>\n          <div className=\"form-control\">\n            <label htmlFor=\"username\">Username</label>\n            <input\n              onChange={e => setUsername(e.target.value)}\n              value={username}\n              className=\"input\"\n              type=\"text\"\n              id=\"username\"\n              placeholder=\"my_username\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"email\">Email</label>\n            <input\n              onChange={e => setEmail(e.target.value)}\n              value={email}\n              className=\"input\"\n              type=\"email\"\n              id=\"email\"\n              placeholder=\"my_email@example.com\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              onChange={e => setPassword(e.target.value)}\n              value={password}\n              className=\"input\"\n              type=\"password\"\n              id=\"password\"\n              placeholder=\"my safe password\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <button type=\"submit\" className=\"btn btn-large\">\n              Submit\n            </button>\n          </div>\n        </form>\n      </div>\n    </main>\n  );\n}\n\nexport default RegisterPage;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { MainContext } from \"../context/context\";\nimport { api } from \"../util/api\";\n\nfunction ChangeAvatar() {\n  const context = useContext(MainContext);\n  const [avatar, setAvatar] = useState(\n    context.me?.avatar || context.defaultAvatar\n  );\n  const [preview, setPreview] = useState(context.me?.avatar || \"\");\n  const [error, setError] = useState(\"\");\n\n  const setProfilePicture = async () => {\n    const response = await api.post(\"/me/avatar\", { avatar });\n    context.setMe(response.data.user);\n  };\n\n  useEffect(() => {\n    setAvatar(context.me?.avatar || context.defaultAvatar);\n    setPreview(context.me?.avatar || \"\");\n  }, [context.defaultAvatar, context.me]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const response = await fetch(preview);\n        const blob = await response.blob();\n        if (blob.size > 100_000) {\n          setError(\"Select a smaller image\");\n          setTimeout(() => setError(\"\"), 3000);\n          setAvatar(context.defaultAvatar);\n        } else if (blob.type.startsWith(\"image/\")) {\n          setAvatar(preview);\n        } else {\n          setAvatar(context.defaultAvatar);\n        }\n      } catch (e) {\n        setAvatar(context.defaultAvatar);\n      }\n    })();\n  }, [context.defaultAvatar, preview]);\n\n  return (\n    <div>\n      <h2>Change your avatar</h2>\n      <div className=\"border-left\">\n        <h3>Preview</h3>\n        <div className=\"profile-picture pic-large\">\n          <img src={avatar} alt=\"your profile\" />\n        </div>\n        <div className=\"settings\">\n          <h4>\n            <label htmlFor=\"url\">Paste an url here</label>\n          </h4>\n          <input\n            type=\"text\"\n            id=\"url\"\n            placeholder=\"https://images.unsplash.com/photo-1602694866292-c0597a4452b2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80\"\n            onChange={e => setPreview(e.target.value)}\n            value={preview}\n          />\n        </div>\n        {error && <span className=\"error btn-large\">{error}</span>}\n        {avatar === context.defaultAvatar || avatar === context.me?.avatar ? (\n          <button title=\"missing image\" disabled className=\"btn btn-large\">\n            Set\n          </button>\n        ) : (\n          <button onClick={setProfilePicture} className=\"btn btn-large\">\n            Set\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ChangeAvatar;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { MainContext } from \"../context/context\";\nimport { api } from \"../util/api\";\n\nfunction ChangeBanner() {\n  const context = useContext(MainContext);\n  const [banner, setBanner] = useState(\n    context.me?.banner || context.defaultBanner\n  );\n  const [preview, setPreview] = useState(context.me?.banner || \"\");\n  const [error, setError] = useState(\"\");\n\n  const setProfileBanner = async () => {\n    const response = await api.post(\"/me/banner\", { banner });\n    console.log(response.data);\n    context.setMe(response.data.user);\n  };\n\n  useEffect(() => {\n    setBanner(context.me?.banner || context.defaultBanner);\n    setPreview(context.me?.banner || \"\");\n  }, [context.defaultBanner, context.me]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const response = await fetch(preview);\n        const blob = await response.blob();\n        if (blob.size > 100_000) {\n          setError(\"Select a smaller image\");\n          setTimeout(() => setError(\"\"), 3000);\n          setBanner(context.defaultBanner);\n        } else if (blob.type.startsWith(\"image/\")) {\n          setBanner(preview);\n        } else {\n          setBanner(context.defaultBanner);\n        }\n      } catch (e) {\n        setBanner(context.defaultBanner);\n      }\n    })();\n  }, [context.defaultBanner, preview]);\n\n  return (\n    <div>\n      <h2>Change your banner</h2>\n      <div className=\"border-left\">\n        <h3>Preview</h3>\n        <div className=\"profile-banner\">\n          <img src={banner} alt=\"your banner\" />\n        </div>\n        <div className=\"settings\">\n          <h4>\n            <label htmlFor=\"url\">Paste an url here</label>\n          </h4>\n          <input\n            type=\"text\"\n            id=\"url\"\n            placeholder=\"https://images.unsplash.com/photo-1622988869811-a4f3d3fe5441?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80\"\n            onChange={e => setPreview(e.target.value)}\n            value={preview}\n          />\n        </div>\n        {error && <span className=\"error btn-large\">{error}</span>}\n        {banner === context.defaultBanner || banner === context.me?.banner ? (\n          <button title=\"missing image\" disabled className=\"btn btn-large\">\n            Set\n          </button>\n        ) : (\n          <button onClick={setProfileBanner} className=\"btn btn-large\">\n            Set\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ChangeBanner;\n","import React, { useEffect, useContext, useState } from \"react\";\nimport { MainContext } from \"../context/context\";\nimport { api } from \"../util/api\";\n\nfunction ChangeName() {\n  const context = useContext(MainContext);\n  const [changingName, setChangingName] = useState(context.me?.username || \"\");\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    setChangingName(context.me?.username || \"\");\n  }, [context]);\n\n  const setUsername = async () => {\n    try {\n      const response = await api.post(\"/me/username\", {\n        username: changingName,\n      });\n      console.log(response.data);\n      context.setMe(response.data.user);\n    } catch (err) {\n      setError(\n        err.response.data.errors.map((e: FieldError) => e.reason).join(\", \")\n      );\n\n      setTimeout(() => setError(\"\"), 3000);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Change your username</h2>\n      <div className=\"border-left\">\n        <div className=\"settings\">\n          <h4>\n            <label htmlFor=\"name\">New username</label>\n          </h4>\n          <input\n            type=\"text\"\n            id=\"name\"\n            onChange={e => setChangingName(e.target.value)}\n            value={changingName}\n          />\n        </div>\n        {error && <span className=\"error btn-large\">{error}</span>}\n        {changingName === context.me?.username || changingName === \"\" ? (\n          <button title=\"missing username\" disabled className=\"btn btn-large\">\n            Set\n          </button>\n        ) : (\n          <button onClick={setUsername} className=\"btn btn-large\">\n            Set\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ChangeName;\n","import React from \"react\";\nimport ChangeAvatar from \"../components/ChangeAvatar\";\nimport ChangeBanner from \"../components/ChangeBanner\";\nimport ChangeName from \"../components/ChangeName\";\n\nfunction SettingsPage() {\n  return (\n    <main className=\"wrapper\">\n      <ChangeName />\n      <ChangeAvatar />\n      <ChangeBanner />\n    </main>\n  );\n}\n\nexport default SettingsPage;\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\ninterface Params {\n  user_id: string;\n}\n\nfunction UserPage() {\n  const { user_id } = useParams() as Params;\n  return <div>User {user_id} Page</div>;\n}\n\nexport default UserPage;\n","import React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport ErrorPage from \"./pages/ErrorPage\";\nimport HomePage from \"./pages/HomePage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport MePage from \"./pages/MePage\";\nimport MePostsCreatePage from \"./pages/MePostsCreatePage\";\nimport MePostsPage from \"./pages/MePostsPage\";\nimport MePostsUpdatePage from \"./pages/MePostsUpdatePage\";\nimport RegisterPage from \"./pages/RegisterPage\";\nimport SettingsPage from \"./pages/SettingsPage\";\nimport UserPage from \"./pages/UserPage\";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Navbar />\n      <Switch>\n        <Route exact path=\"/\">\n          <HomePage />\n        </Route>\n        <Route exact path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Route exact path=\"/register\">\n          <RegisterPage />\n        </Route>\n        <Route exact path=\"/me\">\n          <MePage />\n        </Route>\n        <Route exact path=\"/me/posts\">\n          <MePostsPage />\n        </Route>\n        <Route exact path=\"/me/posts/create\">\n          <MePostsCreatePage />\n        </Route>\n        <Route exact path=\"/me/posts/update/:post_id\">\n          <MePostsUpdatePage />\n        </Route>\n        <Route exact path=\"/users/:user_id\">\n          <UserPage />\n        </Route>\n        <Route exact path=\"/settings\">\n          <SettingsPage />\n        </Route>\n        <Route path=\"*\">\n          <ErrorPage />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { MyContextProvider } from \"./context/context\";\nimport \"./index.css\";\nimport { CookiesProvider } from \"react-cookie\";\n\nReactDOM.render(\n  <CookiesProvider>\n    <MyContextProvider>\n      <App />\n    </MyContextProvider>\n  </CookiesProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}